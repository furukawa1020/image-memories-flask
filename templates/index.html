<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>しらみね大学村</title>
    <style>
        #image-container {
            text-align: center;
            margin-top: 20%;
        }
        #form-container {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div id="image-container">
        <h2>画像を選んでください</h2>
        <div>
            {% for image in images %}
                <img src="{{ url_for('static', filename='images/' ~ image) }}" alt="{{ image }}" style="width:150px; margin:10px; cursor:pointer;" onclick="selectImage('{{ image }}')">
            {% endfor %}
        </div>
    </div>

    <div id="form-container">
        <form action="/" method="POST">
            <label for="name">名前:</label>
            <input type="text" id="name" name="name" required>
            <br><br>
            <label for="date">日付:</label>
            <input type="date" id="date" name="date" required>
            <br><br>
            <input type="hidden" id="image" name="image" required>
            <div id="selected-image-preview"></div>
            <input type="submit" value="送信">
        </form>
    </div>

    <script>
        // 画像を選択したらフォームを表示し、選択画像をhiddenにセット
        function selectImage(imageName) {
            document.getElementById('image-container').style.display = 'none';
            document.getElementById('form-container').style.display = 'block';
            document.getElementById('image').value = imageName;
            document.getElementById('selected-image-preview').innerHTML = '<img src="/static/images/' + imageName + '" style="width:150px;">';
        }
    </script>
</body>
</html>
